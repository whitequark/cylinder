OASISFormat:  0.4
Name:         cylinder
Version:      0.1
Synopsis:     A trustless file synchronization engine
Authors:      Peter Zotov <whitequark@whitequark.org>
License:      LGPL-2.1 with OCaml linking exception
Homepage:     https://github.com/whitequark/cylinder
Plugins:      META (0.4), DevFiles (0.4)
BuildTools:   ocamlbuild

Library "cylinder"
  Path:             lib
  Modules:          core/Block, core/Chunk,
                    backends/In_memory_store,
                    Pathname, Timestamp, Tree
  BuildDepends:     threads, lwt, lwt.unix, lwt.preemptive, extlib,
                    ZMQ, lwt-zmq, protobuf, sodium,
                    inotify, inotify.lwt
  ByteOpt:          -ppx ppx_lwt -ppx ppx_protobuf
  NativeOpt:        -ppx ppx_lwt -ppx ppx_protobuf

Executable cylinderd
  Path:             lib
  MainIs:           cylinderd.ml
  BuildDepends:     cylinder
  CompiledObject:   best

Executable cylinder_top
  Path:             lib
  MainIs:           cylinder_top.ml
  Install:          false
  BuildDepends:     cylinder, compiler-libs.toplevel, utop
  CompiledObject:   byte
  ByteOpt:          -linkall -predicates create_toploop

Executable test_cylinder
  Path:             lib_test
  MainIs:           test_cylinder.ml
  Install:          false
  BuildDepends:     oUnit (>= 2.0), cylinder
  CompiledObject:   best
  ByteOpt:          -ppx ppx_lwt
  NativeOpt:        -ppx ppx_lwt

Test test_cylinder
  Command:          $test_cylinder -runner sequential
