OASISFormat:  0.4
Name:         cylinder
Version:      0.1
Synopsis:     A trustless file synchronization engine
Authors:      Peter Zotov <whitequark@whitequark.org>
License:      LGPL-2.1 with OCaml linking exception
Homepage:     https://github.com/whitequark/cylinder
Plugins:      META (0.4), DevFiles (0.4)
BuildTools:   ocamlbuild

Library "cylinder"
  Path:             lib
  Modules:          crypto/Secret_box, crypto/Box,
                    core/Base64_url, core/Block, core/Chunk, core/Graph,
                    core/Timestamp, core/File,
                    backends/In_memory_store,
                    local/Pathname, local/Tree
  Pack:             true
  BuildDepends:     threads, lwt, lwt.unix, lwt.preemptive, extlib,
                    ZMQ (>= 4.0), lwt-zmq, protobuf, sodium,
                    inotify (>= 2.0), inotify.lwt, cmdliner
  ByteOpt:          -ppx ppx_lwt -ppx ppx_protobuf
  NativeOpt:        -ppx ppx_lwt -ppx ppx_protobuf

Executable "cylinder-cli"
  Path:             lib
  MainIs:           cylinder_cli.ml
  BuildDepends:     cylinder
  CompiledObject:   best

Executable "cylinder_top"
  Path:             lib
  MainIs:           cylinder_top.ml
  Install:          false
  BuildDepends:     cylinder, compiler-libs.toplevel, utop
  CompiledObject:   byte
  ByteOpt:          -linkall -predicates create_toploop

Executable "test_cylinder"
  Path:             lib_test
  MainIs:           test_cylinder.ml
  Install:          false
  BuildDepends:     oUnit (>= 2.0), cylinder
  CompiledObject:   best
  ByteOpt:          -ppx ppx_lwt -ppx ppx_protobuf
  NativeOpt:        -ppx ppx_lwt -ppx ppx_protobuf

Test "test_cylinder"
  Command:          $test_cylinder -runner sequential

AlphaFeatures: ocamlbuild_more_args
Document "api"
  Type:             ocamlbuild (0.4)
  BuildTools:       ocamldoc
  Title:            API reference for Cylinder

  XOCamlbuildPath:      .
  XOCamlbuildExtraArgs: "-docflags '-colorize-code -short-functors -charset utf-8'"
  XOCamlbuildLibraries: cylinder

SourceRepository "master"
  Type:             git
  Location:         https://github.com/whitequark/cylinder.git
  Branch:           master
  Browser:          https://github.com/whitequark/cylinder
